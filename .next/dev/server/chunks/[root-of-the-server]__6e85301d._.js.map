{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///D:/code/wedding-website/app/api/wishes/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\r\nimport { promises as fs } from \"fs\"\r\nimport path from \"path\"\r\n\r\nconst wishesFilePath = path.join(process.cwd(), \"data\", \"wishes.json\")\r\n\r\nasync function ensureDataDirectory() {\r\n  const dataDir = path.join(process.cwd(), \"data\")\r\n  try {\r\n    await fs.access(dataDir)\r\n  } catch {\r\n    await fs.mkdir(dataDir, { recursive: true })\r\n  }\r\n}\r\n\r\nasync function readWishes() {\r\n  try {\r\n    await ensureDataDirectory()\r\n    const data = await fs.readFile(wishesFilePath, \"utf-8\")\r\n    return JSON.parse(data)\r\n  } catch {\r\n    return []\r\n  }\r\n}\r\n\r\nasync function writeWishes(wishes: any[]) {\r\n  await ensureDataDirectory()\r\n  await fs.writeFile(wishesFilePath, JSON.stringify(wishes, null, 2))\r\n}\r\n\r\nexport async function GET() {\r\n  const wishes = await readWishes()\r\n  return NextResponse.json(wishes)\r\n}\r\n\r\nexport async function POST(request: Request) {\r\n  try {\r\n    const { name, message } = await request.json()\r\n\r\n    if (!name || !message) {\r\n      return NextResponse.json({ error: \"Name and message are required\" }, { status: 400 })\r\n    }\r\n\r\n    const wishes = await readWishes()\r\n    const newWish = {\r\n      name,\r\n      message,\r\n      timestamp: Date.now(),\r\n    }\r\n\r\n    wishes.push(newWish)\r\n    await writeWishes(wishes)\r\n\r\n    return NextResponse.json(newWish, { status: 201 })\r\n  } catch (error) {\r\n    return NextResponse.json({ error: \"Failed to save wish\" }, { status: 500 })\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,iBAAiB,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAExD,eAAe;IACb,MAAM,UAAU,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI;IACzC,IAAI;QACF,MAAM,yGAAE,CAAC,MAAM,CAAC;IAClB,EAAE,OAAM;QACN,MAAM,yGAAE,CAAC,KAAK,CAAC,SAAS;YAAE,WAAW;QAAK;IAC5C;AACF;AAEA,eAAe;IACb,IAAI;QACF,MAAM;QACN,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,gBAAgB;QAC/C,OAAO,KAAK,KAAK,CAAC;IACpB,EAAE,OAAM;QACN,OAAO,EAAE;IACX;AACF;AAEA,eAAe,YAAY,MAAa;IACtC,MAAM;IACN,MAAM,yGAAE,CAAC,SAAS,CAAC,gBAAgB,KAAK,SAAS,CAAC,QAAQ,MAAM;AAClE;AAEO,eAAe;IACpB,MAAM,SAAS,MAAM;IACrB,OAAO,gRAAY,CAAC,IAAI,CAAC;AAC3B;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE5C,IAAI,CAAC,QAAQ,CAAC,SAAS;YACrB,OAAO,gRAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAgC,GAAG;gBAAE,QAAQ;YAAI;QACrF;QAEA,MAAM,SAAS,MAAM;QACrB,MAAM,UAAU;YACd;YACA;YACA,WAAW,KAAK,GAAG;QACrB;QAEA,OAAO,IAAI,CAAC;QACZ,MAAM,YAAY;QAElB,OAAO,gRAAY,CAAC,IAAI,CAAC,SAAS;YAAE,QAAQ;QAAI;IAClD,EAAE,OAAO,OAAO;QACd,OAAO,gRAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAsB,GAAG;YAAE,QAAQ;QAAI;IAC3E;AACF"}}]
}